<div class="page-shell">
  <!-- NAV SUS STÂNGA -->
  <div class="top-nav">
    <app-navigation-bar></app-navigation-bar>
  </div>

  <!-- background decor -->
  <div class="bg-decor bg-decor-1"></div>
  <div class="bg-decor bg-decor-2"></div>

  <!-- CONȚINUT -->
  <div class="content-wrap">
    <!-- PROFIL ADMIN -->
    <div class="card profile-card">
      <div class="card-header">
        <div class="logo-circle">{{ admin.name[0] }}</div>
        <div>
          <h1>Admin profile</h1>
          <p>View and manage your admin account</p>
        </div>
      </div>

      <div class="profile-top">
        <div class="avatar-circle-big">
          {{ admin.name[0] }}
        </div>
        <div>
          <h2>{{ admin.name }}</h2>
          <p class="role">{{ admin.role }}</p>
        </div>
      </div>

      <div class="info-grid">
        <div class="info-item">
          <span class="label">Email</span>
          <span class="value">{{ admin.email }}</span>
        </div>
        <div class="info-item">
          <span class="label">Location</span>
          <span class="value">{{ admin.location }}</span>
        </div>
        <div class="info-item">
          <span class="label">Admin since</span>
          <span class="value">{{ admin.joined }}</span>
        </div>
      </div>

      <div class="buttons-row">
        <button class="btn primary" (click)="onEditProfile()">Edit profile</button>
        <button class="btn ghost" (click)="onLogout()">Logout</button>
      </div>
    </div>

    <!-- APPROVE SPECIAL EVENTS -->
    <div class="card admin-card">
      <div class="card-header small">
        <h2>Approve special events</h2>
        <p>Requests waiting for your approval</p>
      </div>

      <div class="events-list">
        <div class="event-row" *ngFor="let req of specialEventRequests">
          <div class="event-room">{{ req.requester }}</div>
          <div class="event-title">{{ req.title }}</div>
          <div class="event-datetime">
            <span class="date-line">{{ req.date }}</span>
            <span class="time-line">{{ req.time }}</span>
          </div>

          <div class="pending-actions">
            <button class="btn primary" (click)="approveRequest(req)">Approve</button>
            <button class="btn ghost" (click)="declineRequest(req)">Decline</button>
          </div>
        </div>
      </div>
    </div>

    <!-- GENERATE INVITE LINK -->
    <div class="card invite-card">
      <div class="card-header small">
        <h2>Generate invite link</h2>
        <p>Create a temporary link to invite users</p>
      </div>

      <div class="invite-body">
        <input
          type="text"
          [value]="generatedLink"
          placeholder="Click generate to create link"
          readonly
        />
        <button class="btn primary" (click)="onGenerateLink()">Generate link</button>
      </div>

      <p class="small-hint" *ngIf="generatedLink">
        Share this link with the participant.
      </p>
    </div>

    <!-- UPCOMING EVENTS -->
    <div class="card schedule-card">
      <div class="card-header small header-with-filter">
        <div>
          <h2>Upcoming events</h2>
          <p>Company-wide bookings</p>
        </div>

        <!-- dropdown custom -->
        <div class="filter-row" (click)="toggleFilter()">
          <span class="filter-label">Filter</span>
          <span class="filter-value">{{ selectedFilter }}</span>
          <span class="filter-caret">▼</span>

          <div class="filter-dropdown" *ngIf="isFilterOpen">
            <button
              type="button"
              class="filter-option"
              *ngFor="let opt of filterOptions"
              (click)="onFilterChange(opt); $event.stopPropagation()"
              [class.active]="opt === selectedFilter"
            >
              {{ opt }}
            </button>
          </div>
        </div>
      </div>

      <div class="events-list" *ngIf="upcomingEvents.length; else noUpcoming">
        <div class="event-row" *ngFor="let ev of upcomingEvents">
          <div class="event-room">{{ ev.roomName }}</div>
          <div class="event-title">{{ ev.title }}</div>
          <div class="event-datetime">
            <span class="date-line">{{ ev.date }}</span>
            <span class="time-line">{{ ev.time }}</span>
          </div>
          <div
            class="event-type"
            [class.meeting]="ev.type === 'meeting'"
            [class.conference]="ev.type === 'conference'"
            [class.recreation]="ev.type === 'recreation'"
          >
            {{ ev.type }}
          </div>

          <!-- descriere hover -->
          <div class="event-details">
            <h4>{{ ev.title }}</h4>
            <p>{{ ev.description }}</p>
            <p class="small-line">Room: {{ ev.roomName }}</p>
          </div>
        </div>
      </div>
      <ng-template #noUpcoming>
        <p class="empty-line">No upcoming events for this period.</p>
      </ng-template>
    </div>

    <!-- PAST EVENTS -->
    <div class="card past-card">
      <div class="card-header small">
        <h2>Past events</h2>
        <p>Already done / archived</p>
      </div>

      <div class="events-list" *ngIf="pastEvents.length; else noPast">
        <div class="past-event-row" *ngFor="let ev of pastEvents">
          <div class="event-room">{{ ev.roomName }}</div>
          <div class="event-title">{{ ev.title }}</div>
          <div class="event-datetime">
            <span class="date-line">{{ ev.date }}</span>
            <span class="time-line">{{ ev.time }}</span>
          </div>
          <div class="event-type past">done</div>

          <!-- descriere hover -->
          <div class="event-details">
            <h4>{{ ev.title }}</h4>
            <p>{{ ev.description }}</p>
            <p class="small-line">Room: {{ ev.roomName }}</p>
          </div>
        </div>
      </div>
      <ng-template #noPast>
        <p class="empty-line">No past events recorded.</p>
      </ng-template>
    </div>
  </div>
</div>
